function getHostUrl(){return isWebsiteLive?"https://www.weelo.com.eg/api/v1/":"http://127.0.0.1:60/api/v1/"}function getToken(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var a=e[t];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf("_adminToken="))return a.substring("_adminToken=".length,a.length)}return null}function getCookie(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),n=a.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function requestHeaders(){var e={};return e.Authorization="Bearer "+getToken(),e}function orderNumberFormat(e){return"OR00"+e}function DataTableEntry(){function e(e,t,a,n,r,o,s){return $(e).DataTable({processing:!0,serverSide:!0,columnDefs:[{searchable:!0,sortable:!0,targets:t,render:a}],language:{processing:'<img src="/Content/loader.gif" />'},ajax:{url:WeeloApi+n,type:r,scrollX:!0,data:function(t){var a=$(e).DataTable().page.info();return o.page=a.page+1,o.pageSize=t.length,o},dataType:"json",cache:!1,headers:requestHeaders(),dataFilter:function(e){var t=jQuery.parseJSON(e);if(t&&null!=t.data){var a={};return a.recordsTotal=t.data.total,a.recordsFiltered=t.data.total,a.data=t.data.data,JSON.stringify(a)}$(".pg-notfound").show();var a={};return a.recordsTotal=0,a.recordsFiltered=0,a.data="",JSON.stringify(a)}},drawCallback:function(e){},columns:s})}function t(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function a(e,t,a,n,r,o,s){return $(e).DataTable({processing:!0,serverSide:!0,columnDefs:[{searchable:!0,sortable:!0,targets:t,render:a}],language:{processing:'<img src="/Content/loader.gif" />'},ajax:{url:WeeloApi+n,type:r,scrollX:!0,data:function(t){var a=$(e).DataTable().page.info();return o.page=a.page+1,o.pageSize=t.length,console.log(o),o},dataType:"json",cache:!1,headers:requestHeaders(),dataFilter:function(e){var t=JSON.parse(e);if(t){var a={};return a.recordsTotal=t.data.length,a.recordsFiltered=t.data.length,a.data=t.data,JSON.stringify(a)}return $(".pg-notfound").show(),JSON.stringify({data:""})}},drawCallback:function(e){},columns:s})}function n(e,t,a,n,r,o,s){return $(e).DataTable({processing:!0,serverSide:!0,columnDefs:[{searchable:!0,sortable:!0,targets:t,render:a}],language:{processing:'<img src="Content/loader.gif" />'},ajax:{url:n,type:r,scrollX:!0,data:function(t){var a=$(e).DataTable().page.info();return o.page=a.page+1,o.pageSize=t.length,o},dataType:"json",cache:!1,headers:requestHeaders(),dataFilter:function(e){var t=JSON.parse(jQuery.parseJSON(e));if(console.log(JSON.parse(jQuery.parseJSON(e))),t){var a={};return a.recordsTotal=t.Total,a.recordsFiltered=t.Total,a.data=t.Data,JSON.stringify(a)}return $(".pg-notfound").show(),JSON.stringify({data:""})}},drawCallback:function(e){},columns:s})}this.bindDataTable=e,this.bindDataTableV1=a,this.bindDataTableAction=n,this.getStringDate=t}function OrderDetails(){function e(e,a){return $("#ploader").show(),$.ajax({url:s+e,type:"GET",headers:requestHeaders(),data:a,dataType:"json",success:function(e){var a=e.data;return null!=a?t(a):$(".pg-notfound").show(),$("#ploader").hide(),e}})}function t(e){$(".merchantName").text(e.merchantName),$(".merchantPhone").text(e.merchantPhone),$(".orderNumber").text(r(e.id));var t=(e.state,"pending"==e.state?"orange darken-1 white-text":"Accepted"==e.state?"blue darken-3 white-text":"Ready"==e.state?"green lighten-1 white-text":"Canceled"==e.state?"red darken-2 white-text":"Delivered"==e.state?"green darken-2 white-text":"");$(".orderstate").addClass(t).text(e.state),$(".acceptedBy").text(e.supervisorName),$(".handeledBy").text(e.courierName),$(".orderstate").text(e.state),$(".tip").text("Tip: "+e.tip.toFixed(2)),$(".tax").text("Tax: "+e.tax+"%"),$(".service").text("Service: "+e.serviceFees),$(".discount").text("Discount: "+e.discount+"%"),$(".customerName").text(e.customer.name),$(".customerAddress").text(e.customer.address),$(".customerApt").text(e.customer.apt),$(".creationDate").text(o(e.creationDate)),a(e),$(".pg-details").show()}function a(e){for(var t="",a=0,n=0,r=e.products,o=0;o<r.length;o++)"NotAvailable"!=r[o].state&&(a=parseFloat(r[o].quantity*r[o].price).toFixed(2),t+='<div><div class="col s1 right-align"><span class="quantity">'+r[o].quantity+'x</span></div><div class="col s9"><span class="itemName">'+r[o].nameEN+' <span class="itemSize">'+r[o].size+" "+r[o].unit+'</span></span></div><div class="col s2 right-align"><span class="subTotal">'+a+"</span></div></div>");$(".products").empty().append(t),$(".total").text("Total: "+e.total.toFixed(2)),n=parseFloat(n),$(".grand-total").text("Grand total: "+e.grandTotal.toFixed(2))}function n(e,t,a){return $("#ploader").show(),$.ajax({url:s+e,type:a,headers:requestHeaders(),data:t,dataType:"json",success:function(e){return $("#ploader").hide(),e}})}function r(e){return"OR00"+e}function o(e){var t=moment.utc(e).toDate();return moment(t).format("DD/MM/YYYY hh:mm:ss A")}var s=WeeloApi;this.getOrder=e,this.fillData=t,this.fillProduct=a,this.getOnlyData=n}function ManageLocation(){function e(e,n,r,o,s,i){e.val()>0&&t(n,r,o).then(function(e){$(i).removeClass("hide");var t=$(s);t.html("").select2({data:{id:null,text:null}}),t.select2({data:a(e.data)})},function(e){})}function t(e,t,a){return $.ajax({url:WeeloApi+e,data:t,type:a,headers:requestHeaders(),dataType:"json"})}function a(e){var t=[];if(t.push({id:0,text:"--Select--"}),e)for(var a=0;a<e.length;a++)t.push({id:e[a].id,text:e[a].name});return t}function n(e,t,a){e.geocode({location:t},function(e,t){if("OK"===t)if(e[0]){var n=e[0].formatted_address.split(",");$(a).val(n[0]+","+n[1])}else window.alert("No results found");else window.alert("Geocoder failed due to: "+t)})}function r(e,t,a,n,r){c={lat:parseInt($(t).val()),lng:parseInt($(a).val())};var i;""==$(t).val()?(i=new google.maps.Map(document.getElementById(e),{center:{lat:-34.397,lng:150.644},zoom:16}),s(i)):i=new google.maps.Map(document.getElementById(e),{center:c,zoom:16}),o(i,t,a,new google.maps.Marker({position:c,map:i,draggable:!0,animation:google.maps.Animation.DROP}),n,r)}function o(e,t,a,r,o,s){google.maps.event.addListener(r,"dragend",function(e){$(t).val(e.latLng.lat()),$(a).val(e.latLng.lng()),n(o,{lat:parseFloat(e.latLng.lat()),lng:parseFloat(e.latLng.lng())},s)}),google.maps.event.addListener(e,"click",function(e){var i={lat:parseFloat(e.latLng.lat()),lng:parseFloat(e.latLng.lng())};r.setPosition(i),$(t).val(e.latLng.lat()),$(a).val(e.latLng.lng()),n(o,i,s)})}function s(e){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){i(t.coords.latitude,t.coords.longitude),e.setCenter(c)},function(){})}function i(e,t){c={lat:e,lng:t}}function l(e,t,a,n,r){var s=new google.maps.Geocoder;map=new google.maps.Map(document.getElementById(e),{center:t,zoom:16});var i=new google.maps.Marker({position:t,map:map,draggable:!0,animation:google.maps.Animation.DROP});o(map,a,n,i,s,r)}var c;this.bindDataArraySelect2=e,this.getListById=t,this.getSelect2Objs=a,this.geocodeLatLng=n,this.bindMap=r,this.showMap=l}function Merchant(){function e(e){var t=$("#"+e);return r("merchant/list","GET",{}).then(function(e){for(var a=e.data,n=0;n<a.length;n++)t.append('<option value="'+a[n].id+'">'+a[n].nameEN+"</option> ")},function(e){})}function t(){return r("merchant/list","GET",{})}function a(e,t,a){return $.ajax({url:WeeloApi+"token",type:"POST",data:{username:e,password:t,grant_type:a},dataType:"json"})}function n(e,t){return r("merchant","POST",{UserName:e,Password:t})}function r(e,t,a){return console.log(WeeloApi),$.ajax({url:WeeloApi+e,type:t,data:a,headers:requestHeaders(),dataType:"json"})}this.getToken=a,this.getMerchant=n,this.bindMerchantsToUl=t,this.bindMerchantsToSelect=e,this.getData=r}var isWebsiteLive=!1,WeeloApi=getHostUrl();$(document).ready(function(){function e(){var e=$('.navbar-collapse form[role="search"].active');e.find("input").val(""),e.removeClass("active")}$("#list").DataTable({aoColumnDefs:[{bSortable:!1,aTargets:["nosorting","text-holder"]}]}),$("#list").show(),$('[data-toggle="tooltip"]').tooltip(),$('body, .navbar-collapse form[role="search"] button[type="reset"]').on("click keyup",function(t){(27==t.which&&$('.navbar-collapse form[role="search"]').hasClass("active")||"reset"==$(t.currentTarget).attr("type"))&&e()}),$(document).on("click",'.navbar-collapse form[role="search"]:not(.active) button[type="submit"]',function(e){e.preventDefault();var t=$(this).closest("form"),a=t.find("input");t.addClass("active"),a.focus()}),$(document).on("click",'.navbar-collapse form[role="search"].active button[type="submit"]',function(t){t.preventDefault();var a=$(this).closest("form"),n=a.find("input");$("#showSearchTerm").text(n.val()),e()}),$("select").select2(),$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")})});