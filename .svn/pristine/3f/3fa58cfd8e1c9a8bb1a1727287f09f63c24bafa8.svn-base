!function(){function a(a){s=a.target.files,$("#inputFile").val(a.target.files[0].name)}function e(a){a.stopPropagation(),a.preventDefault(),NProgress.start();var e=document.querySelector("#fileForm"),r=new FormData(e);$.ajax({url:"MerchantProduct/Upload",data:r,processData:!1,type:"POST",contentType:!1,processData:!1,success:function(a){g=a,m?dataTable.draw():t(),NProgress.done(),$("#loaderGif").addClass("hidden")}}),h=!0}function t(){m=!0,$("#loaderGif").removeClass("hidden"),l=y.bindDataTableAction("#originalData2",[],function(a,e,t,r){return a},"MerchantProduct/ReadExcelDatatable","POST",{Path:g},[{data:"Price"},{data:"Barcode"},{data:"NameAR"}]),$("#tabs").removeClass("hidden"),$("#loaderGif").addClass("hidden")}function r(a,e){i=$(e).DataTable({data:JSON.parse(JSON.stringify(a)),columnDefs:[{searchable:!0,sortable:!0,targets:[0,1,2,3],render:function(a,e,t,r){return 3==r.col?'<img class="imageContainer" style="width:90px;height:80px;" src="'+(c=a||"Content/images/placeholder.gif")+'"/>':a}}],columns:[{data:"Price"},{data:"Barcode"},{data:"NameAR"},{data:"ImageUrl"}]})}function n(){$("#myProgress").removeClass("hidden"),o=setInterval(function(){f+=1,$("#myBar").css("width",f+"px")},1e3),$("#loaderGif").removeClass("hidden");var a={MatchedProduct:p,UnmatchedProduct:v,MerchantId:parseInt(P)};$.ajax({url:"MerchantProduct/InsertData",data:a,type:"POST",success:function(a){clearInterval(o),$("#myProgress").addClass("hidden"),$("#loaderGif").addClass("hidden")}})}function d(){$("#myProgress").removeClass("hidden"),NProgress.start(),o=setInterval(function(){f+=1,$("#myBar").css("width",f+"px")},1e3),$("#loaderGif").removeClass("hidden");var a={MatchedProduct:p,UnmatchedProduct:v,MerchantId:parseInt(P)};$.ajax({url:"MerchantProduct/InsertUnMatechedData",data:a,type:"POST",success:function(a){NProgress.done(),clearInterval(o),$("#myProgress").addClass("hidden"),$("#loaderGif").addClass("hidden")}})}$("span.select2").css("float","right");var s,o,c,i,l,h=!0,u=!0,m=!1,f=5,P=0,g="",p=[],v=[],y=new DataTableEntry;l&&l.destroy();document.getElementById("myBar");$("input[type=file]").on("change",a),$("#MerchantDetails").on("change",function(){$(".progress").hide(),$("#Submit").removeAttr("disabled"),P=$(this).val(),""!=$(this).val()?$.get("MerchantProduct/Merchant",{id:P},function(a){$("#conDiv").removeClass("hidden"),$("#loaderGif").addClass("hidden")}):$("#conDiv").addClass("hidden")}),$("#fileForm").on("submit",e),$("#ReadyToInsert").on("click",function(){h?alert("Check un-matched tab!"):d()}),$("#rdMatced").on("click",function(){h?alert("Check un-matched tab!"):n()}),$("#matchProduct").on("click",function(){h&&(NProgress.start(),$("#loaderGif").removeClass("hidden"),$.post("GetProductStatusByNames",{path:g}).then(function(a){var e=JSON.parse(a);p=e.MatchedProduct,r(e.MatchedProduct,"#Matched"),$("#loaderGif").addClass("hidden"),NProgress.done()},function(a){alert("Try again later!")}),h=!1)}),$("#umnatchedProduct").on("click",function(){u&&(NProgress.start(),$("#loaderGif").removeClass("hidden"),$.post('@Url.Action("GetProductUnMatchedStatusByNames")',{path:g}).then(function(a){var e=JSON.parse(a);v=e.UnmatchedProduct,r(e.UnmatchedProduct,"#UnMatched"),$("#loaderGif").addClass("hidden"),NProgress.done()},function(a){alert("Try again later!")}),u=!1)}),$(document).on("click",".imageContainer",function(){$(".modal-title").html($(this).parent().prev().html()),$("#image-preview").attr("src",$(this).attr("src")),$("#myModal").modal("show")}),$(document).on("ready",function(){$("#tabs").tabs()})}();