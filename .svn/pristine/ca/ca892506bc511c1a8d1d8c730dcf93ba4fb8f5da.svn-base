!function(){function t(t){a&&a.destroy();var e;a=n.bindDataTable("#OrderTransaction",[0,1,2,3,4,5,6,7,8],function(t,a,o,n){if(0==n.col)return e=t,orderNumberFormat(t);if(4==n.col||5==n.col){return"Invalid Date"!=moment.utc(t).toDate()?moment(t).format("DD/MM/YYYY hh:mm:ss A"):"--"}return 7==n.col?1==t?'<a class="btn green"><i class ="material-icons">Yes</i></a>':'<i class ="material-icons">Not Yet</i>':8==n.col?'<button class="btn btn-default" id="btnCollect" data-id='+e+">Collect</button>":t},"merchant/transaction","POST",{duration:t,dateToPass:o},[{data:"id"},{data:"nameEN"},{data:"name"},{data:"grandTotal"},{data:"collectionDate"},{data:"collectionDueDate"},{data:"notes"},{data:"isCollected"}])}var a,e,o="",n=new DataTableEntry,r=new OrderDetails,d=$(".selectDataTable").val();d&&t(d),$("select").css("display","block"),$("span.select2").css("width","100%"),$("#searchRange").on("click",function(){var a=new Date($("#datepicker2From").val()),e=new Date($("#datepicker2To").val()),r=(n.getStringDate(a),n.getStringDate(e));if(""!=$("#datepicker2To").val()&&""!=$("#datepicker2From").val()){var d=Math.abs(e.getTime()-a.getTime()),l=Math.ceil(d/864e5);o=r,t(l)}else alert("Something went wrong")}),$("#searchOrder").on("click",function(){$("#order-search tbody").html(""),$("#myOrderModal").modal("show")}),$("#searchOrderByNumberOrId").on("click",function(){$("#order-search tbody").html(""),r.getOnlyData("order/details/"+$("#order-number").val(),{},"GET").then(function(t){if(null!=t.data){var a=t.data,e="<tr><td>"+a.id+"</td><td>"+a.orderNumber+"</td><td>"+a.products.length+"</td><td>"+a.grandTotal+"</td><td>"+a.merchantName+'</td><td><a href="#">details</a></td></tr>';$("#order-search tbody").html(e),$(".products-search-Info").removeClass("hide")}else $(".pg-notfound").removeClass("hide"),$(".products-search-Info").addClass("hide")},function(t){$(".pg-notfound").removeClass("hide"),$(".products-search-Info").addClass("hide")})}),$("select").on("change",function(a){var e=$(this).val();o="",e>-1?(t(e),$("#datepicker2To").val(""),$("#datepicker2From").val("")):$("#myModal").modal("show")}),$(document).on("click","#btnCollect",function(){e=$(this).data("id"),$("#collectModal").modal("show")}),$("#order-collect").on("click",function(){r.getOnlyData("merchant/transaction/update/"+e,{},"GET").then(function(t){if(null!=t.data){t.data;$("#collectModal").modal("hide"),a.draw()}else alert("something went wrong")},function(t){alert("something went wrong")})})}();